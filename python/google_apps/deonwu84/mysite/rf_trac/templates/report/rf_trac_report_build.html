{% extends "report/report_base.html" %}
{% load robot_tags %}

{% block body %}
<div>
	<h2>Test summary</h2>
    <div>
		<table class="meta">
            <tr>
                <th style="color:#009900;">Project Name:</th>
                <td><a href="/rf_trac/v/trac_list?name={{build.parent.name}}">{{build.parent.name}}</a></td>
            </tr>			
			<tr>
				<th style="color:#009900;">Build Name:</th>
				<td>{{build.build_name}}</td>
			</tr>
            <tr>
                <th style="color:#009900;">SUT name:</th>
                <td>{{build.sut_name}}</td>
            </tr>
            <tr>
                <th style="color:#009900;">SUT version:</th>
                <td>{{build.sut_version}}</td>
            </tr>
            <tr>
                <th style="color:#009900;">SUT release:</th>
                <td>{{build.sut_release}}</td>
            </tr>
            <tr>
                <th style="color:#009900;">Count/Pass/Fail:</th>
                <td>{{build.summary_count}}/{{build.summary_pass}}/{{build.summary_fail}}</td>
            </tr>
		</table>		
    </div>
</div>

<div>
	<div style="float:right;">Diff option:
		    <select name="trac">
                <option>SUT name</option>
                <option>SUT version</option>
				<option>SUT release</option>
            </select> 
	</div>
<h2>Test Details</h2>
</div>
<table class="details" style="width:100%;">
    <tr>
        <th class="col_name">Name</th>
        <th class="col_tags">Tags</th>
        <th class="col_status">Status</th>
		<th class="col_status">Diff</th>
		<th width="120px;">Trac</th>
        <th class="col_msg">Message</th>
		<th class="col_times" >Start / End</th>
    </tr>
{% for t in log_list %}	
    <tr class="{{t.diff.info}}">
        <td class="col_name"><a href="/rf_trac/r/case?id={{t.reportid}}">{{t.suitename}}.{{t.testname}}</a></td>
        <td class="col_tags">{{t.tags}}</td>
        <td class="col_status {{t.status|lower}}">{{t.status}}</td>
		<td class="diff {{t.diff.diff_status|lower}}">
{% ifequal t.diff.diff_uuid 'unknown' %}unknown
	{% else %}<a href="/rf_trac/r/log_st?uuid={{t.diff.diff_uuid}}">{{t.diff.diff_status}}</a>						
{% endifequal %}
		</td>
		<td>
			<select name="trac">
				{%autoescape off %}{{category_list}}{% endautoescape %}
			</select> 
		</td>
        <td class="col_msg">{{t.error}}</td>
        <td class="col_times">{{t.starttime}}<br/>{{t|rbtime}}</td>
    </tr>
{% endfor %}
</table>
<script type="text/javascript" >
    var endpoint='http://localhost:8080/rf_trac/', api_key='760c8ae45917ffd95be7bdf0f2238f05';
    $import("rftrac:setup_diff_reporting", function(e){setup_diff_reporting(endpoint, api_key);});
</script>
{% endblock %}